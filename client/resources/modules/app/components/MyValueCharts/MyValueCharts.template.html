<div class="">
	<div class="flex-column">
		<h2 class="my-valuecharts-header text-center">My ValueCharts</h2>
		<div class="col-xs-offset-1 col-xs-10 demo-table">
			<div class="flex-row column-container well well-lg">
				<table class="table table-hover">
					<thead>
						<th></th>
						<th>Name</th>
						<th>Password</th>
						<th>Number of Users</th>
						<th>Creation</th>
						<th>User Changes</th>
					</thead>
					<tbody>
						<tr *ngFor="let chartSummary of valueChartOwnerships; let i = index ">
							<th score="row">{{i + 1}}</th>
							<td>{{chartSummary.name}}</td>
							<td>{{chartSummary.password}}</td>
							<td>{{chartSummary.numUsers}}</td>
							<td>{{getStatusText(chartSummary)}}</td>
							<td>{{chartSummary.userChangesPermitted ? 'Allowed': 'Prevented'}}</td>
							<td><button class="btn btn-sm btn-default" [disabled]="getStatusText(chartSummary) === 'Incomplete'" (click)="openValueChart(chartSummary._id, chartSummary.password)">View</button></td>
							<td><button class="btn btn-sm btn-default" (click)="editValueChart(chartSummary._id, chartSummary.password)">Edit</button></td>
							<td><button class="btn btn-sm btn-default" (click)="setValueChart(chartSummary._id, chartSummary.password)" data-toggle="modal" data-target="#export-modal">Export</button></td>
							<td><button class="btn btn-sm btn-default" (click)="setValueChart(chartSummary._id, chartSummary.password)" data-toggle="modal" data-target="#delete-modal">Delete</button></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<h2 class="my-valuechart-memberships-header text-center">My ValueChart Memberships</h2>
		<div class="col-xs-offset-1 col-xs-10 demo-table">
			<div class="flex-row column-container well well-lg">
				<table class="table table-hover">
					<thead>
						<th></th>
						<th>Name</th>
						<th>Password</th>
						<th>Number of Users</th>
						<th>Creation</th>
						<th>User Changes</th>
					</thead>
					<tbody>
						<tr *ngFor="let chartSummary of valueChartMemberships; let i = index ">
							<th score="row">{{i + 1}}</th>
							<td>{{chartSummary.name}}</td>
							<td>{{chartSummary.password}}</td>
							<td>{{chartSummary.numUsers}}</td>
							<td>{{getStatusText(chartSummary)}}</td>
							<td>{{chartSummary.userChangesPermitted ? 'Allowed': 'Prevented'}}</td>
							<td><button class="btn btn-sm btn-default" (click)="editPreferences(chartSummary._id, chartSummary.name, chartSummary.password)">Edit Preferences</button></td>
							<td><button class="btn btn-sm btn-default" (click)="setValueChart(chartSummary._id, chartSummary.password)" data-toggle="modal" data-target="#leave-modal">Leave Chart</button></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class="modal fade" id="export-modal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" id="close-export-modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="modal-header">Export ValueChart</h4>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-xs-offset-2 col-xs-4">
							<ExportValueChart></ExportValueChart>
						</div>
						<div class="col-xs-6">
							<a class="btn btn-default" id="download-user-weights"
								download="{{getValueChartName()}}"
								href="javascript:void(0)"
								(click)="exportUserWeights()">
								Export User Weights
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="delete-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" id="close-delete-modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modal-header">Delete Chart</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-11 col-sm-offset-1">
                            <h3>Are you sure you want to permanently delete this chart?</h3>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-offset-3 col-sm-9">
                        	<button type="submit" class="btn btn-lg btn-success" (click)="deleteValueChart(valueChartService.getBaseValueChart()._id, valueChartService.getBaseValueChart().getFName())" data-dismiss="modal">OK</button>
                            <button type="submit" class="btn btn-lg btn-danger" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="leave-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" id="close-leave-modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modal-header">Leave Chart</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-11 col-sm-offset-1">
                            <h3>Are you sure you want to leave this chart?</h3>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-sm-offset-3 col-sm-9">
                        	<button type="submit" class="btn btn-lg btn-success" (click)="leaveChart(valueChartService.getBaseValueChart()._id)" data-dismiss="modal">OK</button>
                            <button type="submit" class="btn btn-lg btn-danger" data-dismiss="modal">Cancel</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="validate-modal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="modal-header">Validation Error</h4>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-11 col-sm-offset-1">
                            <h5 id="validate-message">{{validationMessage}}</h5>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>