<div class="">
	<div class="flex-column creation-page">
		<div class="flex-row column-container col-xs-12">
			<form class="form-inline flex-row column-container">
				<div class="form-group">
					<!--
					<a class="btn btn-success btn-lg" (click)="createValueChart()" id="createValueChart">
						Create a ValueChart
					</a>
					<a class="file-upload" href="javascript:void(0);" id="thumbnail-upload">
						<button class="btn btn-success btn-lg">
						Import a ValueChart
						</button>
						<input name="file-to-upload" type="file" class="upload" (change)="uploadValueChart($event)"/>
					</a>
					<button class="btn btn-success btn-lg" type="button" (click)="isJoining = true" data-toggle="modal" data-target="#chart-credentials-modal">
						Join Existing ValueChart
					</button>
					<button class="btn btn-success btn-lg" type="button" (click)="isJoining = false" data-toggle="modal" data-target="#chart-credentials-modal">
						View Existing ValueChart
					</button>
					-->
					<div class="modal fade" id="chart-credentials-modal" tabindex="-1" role="dialog">
						<div class="modal-dialog" role="document">
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" id="close-chart-credentials-modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
									<h4 class="modal-title" id="modal-header">{{getModalTitle()}}</h4>
								</div>
								<div class="modal-body">
									<form>
										<div class="row">
											<label for="chart-name-input" class="col-sm-3 col-sm-offset-2 control-label">ValueChart Name</label>
											<div class="col-sm-6">
												<input type="text" class="form-control" id="chart-name-input" placeholder="Name" [(ngModel)]="valueChartName" name="valueChartName">
											</div>
										</div>
										<div class="row">
											<label for="chart-passsword-input" class="col-sm-3 col-sm-offset-2 control-label">Password</label>
											<div class="col-sm-6">
												<input class="form-control" id="chart-passsword-input" placeholder="Password" [(ngModel)]="valueChartPassword" name="valueChartName">
											</div>
										</div>
										<div class="row">
											<div class="col-sm-offset-5 col-sm-7">
												<button id="continue-button" type="submit" class="btn btn-success" (click)="handleModalInputs(valueChartName, valueChartPassword)">Continue</button>
											</div>
										</div>
										<div class="row">
											<div [hidden]="!invalidCredentials" class="alert alert-danger">
												<span class="col-sm-offset-4">Invalid Name or Password</span>
											</div>
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</form>
		</div>
		<h2 *ngIf="currentUserService.isLoggedIn()" class="my-valuechart-memberships-header text-center">My ValueCharts</h2>
		<div class="col-xs-offset-1 col-xs-10 demo-table">
			<div class="flex-row column-container well well-lg">
				<table class="table table-hover">
					<thead>
						<th></th>
						<th>Name</th>
						<th>Password</th>
						<th>Number of Users</th>
						<th>Creation</th>
						<th>User Changes</th>
					</thead>
					<tbody>
						<tr *ngFor="let chartSummary of valueChartOwnerships; let i = index ">
							<th score="row">{{i + 1}}</th>
							<td>{{chartSummary.name}}</td>
							<td>{{chartSummary.password}}</td>
							<td>{{chartSummary.numUsers}}</td>
							<td>{{getStatusText(chartSummary)}}</td>
							<td>{{getChangesPermittedText(chartSummary)}}</td>
							<td><button class="btn btn-sm btn-default" [disabled]="getStatusText(chartSummary) === 'Incomplete'" (click)="openValueChart(chartSummary._id, chartSummary.password)">View</button></td>
							<td><button class="btn btn-sm btn-default" (click)="editValueChart(chartSummary._id, chartSummary.password)">Edit</button></td>
							<td><button class="btn btn-sm btn-default" (click)="setValueChart(chartSummary._id, chartSummary.password)" data-toggle="modal" data-target="#export-modal">Export</button></td>
							<td><button class="btn btn-sm btn-default" (click)="displayDeleteChart(chartSummary._id, chartSummary.password)">Delete</button></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<h2 *ngIf="currentUserService.isLoggedIn()" class="my-valuechart-memberships-header text-center">My ValueChart Memberships</h2>
		<div class="col-xs-offset-1 col-xs-10 demo-table">
			<div class="flex-row column-container well well-lg">
				<table class="table table-hover" >
					<thead>
						<th></th>
						<th>Name</th>
						<th>Password</th>
						<th>Number of Users</th>
						<th>Creation</th>
						<th>User Changes</th>
					</thead>
					<tbody>
						<tr *ngFor="let chartSummary of valueChartMemberships; let i = index ">
							<th score="row">{{i + 1}}</th>
							<td>{{chartSummary.name}}</td>
							<td>{{chartSummary.password}}</td>
							<td>{{chartSummary.numUsers}}</td>
							<td>{{getStatusText(chartSummary)}}</td>
							<td>{{ !chartSummary.lockedByCreator && !chartSummary.lockedBySystem ? 'Allowed': 'Prevented'}}</td>
							<td><button class="btn btn-sm btn-default" [disabled]="getStatusText(chartSummary) === 'Incomplete'" (click)="editPreferences(chartSummary._id, chartSummary.name, chartSummary.password)">Edit Preferences</button></td>
							<td><button class="btn btn-sm btn-default" (click)="displayLeaveChart(chartSummary._id, chartSummary.password)">Leave Chart</button></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
		<div *ngIf="!currentUserService.isLoggedIn()" class="col-xs-offset-3 col-xs-6 demo-table">
			<h2 class="text-center">Select a Demo ValueChart</h2>
			<div class="flex-row column-container well well-lg">
				<table class="table table-hover">
					<thead>
						<th></th>
						<th>ValueChart Name</th>
						<th>Type</th>
					</thead>
					<tbody>
						<tr *ngFor="let demoChart of demoValueCharts; let i = index ">
							<th score="row">{{i + 1}}</th>
							<td>{{demoChart.name}}</td>
							<td>{{demoChart.type}}</td>
							<td><button class="btn btn-sm btn-default" (click)="selectDemoValueChart(demoChart)">Select</button></td>
						</tr>
					</tbody>
				</table>
			</div>
		</div>
	</div>
	<div class="modal fade" id="export-modal" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" id="close-export-modal" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="modal-header">Export ValueChart</h4>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-xs-offset-2 col-xs-4">
							<ExportValueChart></ExportValueChart>
						</div>
						<div class="col-xs-6">
							<a class="btn btn-default" id="download-user-weights"
								download="{{getValueChartName()}}"
								href="javascript:void(0)"
								(click)="exportUserWeights()">
								Export User Weights
							</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<NotificationModal
[display]="displayModal"
[title]="modalTitle"
[body]="modalBody"
[actionEnabled]="modalActionEnabled"
[noActionText]="'Cancel'"
[actionText]="'Ok'"
[actionFunction]="modalActionFunction"
(modalClosed)="displayModal = $event">
</NotificationModal>