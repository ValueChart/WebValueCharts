<div *ngIf="!loading" id="ValueChartView">
	<input type="color" id="primitiveObjective-color-picker">
	<div class="valuechart-toolbar">
		<form class="">
			<div class="pull-left">
				<button class="btn btn-default" *ngIf="valueChartViewerService.isOwner()" (click)="editValueChart()">
					Edit ValueChart
				</button>
				<button class="btn btn-default" *ngIf="valueChartViewerService.isParticipant()" (click)="editPreferences()">
					Edit Preferences
				</button>
				<!-- <ExportValueChart></ExportValueChart> -->
				<button class="btn btn-danger" *ngIf="valueChartViewerService.isOwner() && !valueChartService.getValueChart().isIndividual() && !valueChartService.getStatus().lockedByCreator" (click)="setUserChangesAccepted(false)">
					Lock Chart
				</button>
				<button class="btn btn-danger" *ngIf="valueChartViewerService.isOwner() && !valueChartService.getValueChart().isIndividual() && valueChartService.getStatus().lockedByCreator" (click)="setUserChangesAccepted(false)">
					Unlock Chart
				</button>
				<button class="btn btn-primary" *ngIf="canViewGroupChart() && valueChartViewerService.getActiveValueChart().getType() === ChartType.Group" (click)="setValueChartTypeToView(ChartType.Individual)">
					View Individual Chart
				</button>
<!-- 				<button class="btn btn-primary" *ngIf="canViewGroupChart() && valueChartViewerService.getActiveValueChart().getType() === ChartType.Individual" (click)="setValueChartTypeToView(ChartType.Group)">
					View Group Chart
				</button> -->
<!-- 				<button class="btn btn-success" *ngIf="canSave()" (click)="save()" [disabled]="!valueChartViewerService.isOwner() && _.isEqual(userGuard.getUserRecord(), valueChartService.getValueChart().getUser(currentUserService.getUsername()))">
					{{valueChartViewerService.isOwner() ? "Save" : "Save to Group Chart"}}
				</button> -->
				<button class="btn btn-primary" (click)="sampleNewAlternative()">
				Get Alternative
				</button>
				<button class="btn btn-success" (click)="getBestAlternative()">
				Make Decision
				</button>
			</div>
			<div>
				<button class="btn btn-default pull-right" [disabled]="undoRedoService && !undoRedoService.canUndo()" (click)="undoChartChange()">
				Undo
				</button>
				<button class="btn btn-default pull-right" [disabled]="undoRedoService && !undoRedoService.canRedo()" (click)="redoChartChange()">
				Redo
				</button>
				<ViewOptions class="pull-right" [chartType]="valueChartViewerService.getActiveValueChart().getType()" (viewConfig)="updateView($event)" (reducedInfo)="updateReducedInfo($event)"></ViewOptions>
				<InteractionOptions class="pull-right" [interactive]="canInteract()" (interactionConfig)="updateInteractions($event)"></InteractionOptions>
			</div>
		</form>
	</div>
	<div>
		<ValueChart
		[valueChart]="valueChartViewerService.getActiveValueChart()"
		[reducedInformation]="reducedInformation"
		[width]="valueChartWidth"
		[height]="valueChartHeight"
		[viewConfig]="viewConfig"
		[interactionConfig]="interactionConfig"
		[usersToDisplay]="usersToDisplay"
		(chartElement)="updateChartElement($event)"
		(undoRedo)="updateUndoRedo($event)"
		(renderEvents)="updateRenderEvents($event)">
		</ValueChart>
	</div>
	<div>
		<DetailBox 
		[valueChart]="valueChartViewerService.getActiveValueChart()"
		[enableManagement]="valueChartViewerService.isOwner()" 
		[showUsers]="!valueChartService.getValueChart().isIndividual()"
		[viewConfig]="viewConfig" 
		[height]="valueChartHeight / 4" 
		[width]="valueChartWidth / 3.1"
		[renderEventsService]="renderEvents"
		[chartElement]="chartElement">
		</DetailBox>
	</div>